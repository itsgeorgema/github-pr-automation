# C++ Clang-Format Configuration
# Based on Google Style Guide with customizations

Language: Cpp
BasedOnStyle: Google

# Basic formatting
IndentWidth: 2
TabWidth: 2
UseTab: Never
ColumnLimit: 100

# Alignment
AlignAfterOpenBracket: Align
AlignConsecutiveAssignments: false
AlignConsecutiveDeclarations: false
AlignEscapedNewlines: Left
AlignOperands: true
AlignTrailingComments: true

# Allow
AllowAllParametersOfDeclarationOnNextLine: true
AllowShortBlocksOnASingleLine: false
AllowShortCaseLabelsOnASingleLine: false
AllowShortFunctionsOnASingleLine: All
AllowShortIfStatementsOnASingleLine: true
AllowShortLoopsOnASingleLine: true

# Binary operators
BinPackArguments: true
BinPackParameters: true

# Braces
BraceWrapping:
  AfterClass: false
  AfterControlStatement: false
  AfterEnum: false
  AfterFunction: false
  AfterNamespace: false
  AfterObjCDeclaration: false
  AfterStruct: false
  AfterUnion: false
  BeforeCatch: false
  BeforeElse: false
  IndentBraces: false

BreakBeforeBraces: Attach
BreakBeforeBinaryOperators: None
BreakBeforeTernaryOperators: true
BreakConstructorInitializersBeforeComma: false
BreakAfterJavaFieldAnnotations: false
BreakStringLiterals: true

# Comments
CommentPragmas: '^ IWYU pragma:'

# Constructor
ConstructorInitializerAllOnOneLineOrOnePerLine: true
ConstructorInitializerIndentWidth: 4

# Continuation
ContinuationIndentWidth: 4

# Cpp11
Cpp11BracedListStyle: true

# Derive
DerivePointerAlignment: true

# Disable
DisableFormat: false

# Experimental
ExperimentalAutoDetectBinPacking: false

# Fix
FixNamespaceComments: true

# For each
ForEachMacros: [ foreach, Q_FOREACH, BOOST_FOREACH ]

# Include
IncludeCategories:
  - Regex: '^<.*\.h>'
    Priority: 1
  - Regex: '^<.*'
    Priority: 2
  - Regex: '.*'
    Priority: 3
IncludeIsMainRegex: '([-_](test|unittest))?$'

# Indent
IndentCaseLabels: true
IndentWrappedFunctionNames: false

# Keep
KeepEmptyLinesAtTheStartOfBlocks: false

# Macro
MacroBlockBegin: ''
MacroBlockEnd: ''

# Max
MaxEmptyLinesToKeep: 1

# Namespace
NamespaceIndentation: None

# Obj-C
ObjCBlockIndentWidth: 2
ObjCSpaceAfterProperty: false
ObjCSpaceBeforeProtocolList: false

# Penalty
PenaltyBreakBeforeFirstCallParameter: 1
PenaltyBreakComment: 300
PenaltyBreakFirstLessLess: 120
PenaltyBreakString: 1000
PenaltyExcessCharacter: 1000000
PenaltyReturnTypeOnItsOwnLine: 200

# Pointer
PointerAlignment: Left

# Raw
RawStringFormats:
  - Delimiter: pb
    Language: TextProto
    BasedOnStyle: google

# Reflow
ReflowComments: true

# Sort
SortIncludes: true

# Space
SpaceAfterCStyleCast: false
SpaceAfterTemplateKeyword: true
SpaceBeforeAssignmentOperators: true
SpaceBeforeParens: ControlStatements
SpaceInEmptyParentheses: false
SpacesBeforeTrailingComments: 2
SpacesInAngles: false
SpacesInContainerLiterals: true
SpacesInCStyleCastParentheses: false
SpacesInParentheses: false
SpacesInSquareBrackets: false

# Standard
Standard: Auto
